!function(a){"use strict";function b(a,b,c,d){this.recalc_needed=!0,this.all_set_callback=c,this.not_all_set_callback=d,this.variation_attributes=a,this.variations_available=b,this.variations_current={},this.variations_selected={},this.reset_current=function(){for(var a in this.variation_attributes){this.variations_current[a]={};for(var b=0;b<this.variation_attributes[a].length;b++)this.variations_current[a.toString()][this.variation_attributes[a][b].toString()]=0}},this.update_current=function(){this.reset_current();for(var a=0;a<this.variations_available.length;a++)if(this.variations_available[a].variation_is_active){var b=this.variations_available[a].attributes;for(var c in b){var d=b[c],e=this.variations_selected[c];if(e&&e==d)this.variations_current[c][d]=1;else{var f=!0;for(var g in this.variations_selected)if(g!=c){var h=this.variations_selected[g],i=b[g];h&&i&&h!=i&&(f=!1)}if(f)if(""===d)for(var j in this.variations_current[c])this.variations_current[c][j]=1;else this.variations_current[c][d]=1}}}this.recalc_needed=!1},this.get_current=function(){return this.recalc_needed&&this.update_current(),this.variations_current},this.reset_selected=function(){this.recalc_needed=!0,this.variations_selected={}},this.set_selected=function(a,b){this.recalc_needed=!0,this.variations_selected[a]=b},this.get_selected=function(){return this.variations_selected}}a.fn.wc_swatches_form=function(){var c=this,d=parseInt(c.data("product_id"),10),e=null,f=!1,g=null;c.on("bind_calculator",function(){var h=c.data("product_variations");f=h===!1,f&&c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var i={};if(c.find(".select-option.selected").each(function(b,c){var d=a(this),e=d.closest("div.select").eq(0),f=e.parent().find(".swatch-label").eq(0),g=e.find("select").first(),h=a("<div/>").html(d.data("value")).text();h=h.replace(/'/g,"\\'"),h=h.replace(/"/g,'\\"'),f&&f.html(g.children("[value='"+h+"']").eq(0).text())}),c.find(".variations select").each(function(b,c){var d=a(c),e=d.data("attribute_name")||d.attr("name");i[e]=[];var f="";if(f=d.find("option:gt(0)").get(),f.length)for(var g=0;g<f.length;g++){var h=f[g];i[e].push(a(h).val())}}),f){g&&g.abort();var j={product_id:d,action:"get_product_variations"};g=a.ajax({url:la_swatches.ajax_url,type:"POST",data:j,success:function(a){e=new b(i,a.data,null,null),c.unblock()}})}else e=new b(i,h,null,null);c.trigger("woocommerce_variation_has_changed")}),c.on("click",".reset_variations",function(){return c.find(".swatch-label").html("&nbsp;"),c.find(".select-option").removeClass("selected"),c.find(".radio-option").prop("checked",!1),!1}).on("click",".select-option",function(b){b.preventDefault();var c=a(this),d=c.closest("div.select").eq(0),e=d.parent().find(".swatch-label").eq(0);if(c.hasClass("disabled"))return!1;if(c.hasClass("selected")){c.removeClass("selected");var f=d.find("select").first();f.children("option:eq(0)").prop("selected","selected").change(),e&&e.html("&nbsp;")}else{d.find(".select-option").removeClass("selected"),c.addClass("selected");var f=(d.data("selectid"),d.find("select").first()),h=a("<div/>").html(c.data("value")).text();h=h.replace(/'/g,"\\'"),h=h.replace(/"/g,'\\"'),f.trigger("focusin").children("[value='"+h+"']").prop("selected","selected").change(),e&&e.html(f.children("[value='"+h+"']").eq(0).text())}}).on("change",".radio-option",function(b){var c=a(this),d=c.closest("div.select").eq(0),e=d.find("select").first(),f=a("<div/>").html(c.val()).text();f=f.replace(/'/g,"\\'"),f=f.replace(/"/g,'\\"'),e.trigger("focusin").children("[value='"+f+"']").prop("selected","selected").change()}).on("woocommerce_variation_has_changed",function(){if(null!==e){c.find(".variations select").each(function(){var b=a(this).data("attribute_name")||a(this).attr("name");e.set_selected(b,a(this).val())});var b=e.get_current();c.find("div.select").each(function(c,d){var e=a(d).find("select").first(),f=e.data("attribute_name")||e.attr("name"),g=b[f];a(d).find("div.select-option").each(function(b,c){g[a(c).data("value")]?a(c).removeClass("disabled"):a(c).addClass("disabled","disabled")}),a(d).find("input.radio-option").each(function(b,c){g[a(c).val()]?(a(c).removeAttr("disabled"),a(c).parent().removeClass("disabled")):(a(c).attr("disabled","disabled"),a(c).parent().addClass("disabled","disabled"))})}),f&&c.find(".wc-default-select").each(function(c,d){var e=a(d),f=e.data("attribute_name")||e.attr("name"),g=b[f];e.find("option:gt(0)").removeClass("attached"),e.find("option:gt(0)").removeClass("enabled"),e.find("option:gt(0)").removeAttr("disabled"),e.find("option:gt(0)").each(function(b,c){g[a(c).val()]?(a(c).addClass("attached"),a(c).addClass("enabled")):a(c).addClass("disabled","disabled")}),e.find("option:gt(0):not(.enabled)").attr("disabled","disabled")})}})},a(document).on("wc_variation_form",".variations_form",function(b){var c=a(this);c.data("has_swatches_form")||c.find(".swatch-control").length&&(c.data("has_swatches_form",!0),c.wc_swatches_form(),c.trigger("bind_calculator"),c.on("reload_product_variations",function(){c.trigger("woocommerce_variation_has_changed"),c.trigger("bind_calculator"),c.trigger("woocommerce_variation_has_changed")}))}),a(".variations_form").trigger("wc_variation_form")}(jQuery);